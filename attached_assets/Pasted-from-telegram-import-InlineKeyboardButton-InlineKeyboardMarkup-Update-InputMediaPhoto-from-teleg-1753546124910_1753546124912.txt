from telegram import InlineKeyboardButton, InlineKeyboardMarkup, Update, InputMediaPhoto
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, ContextTypes

# === Setup ===
BOT_TOKEN = "YOUR_BOT_TOKEN"
JOIN_CHANNEL = "@YourJoinChannel"
ADMIN_ID = 123456789  # Replace with your Telegram ID

# === Data for Offers ===
courses = {
    "ethical": {
        "title": "Ethical Hacking V12.5",
        "price": "â‚¹999 â†’ â‚¹699",
        "image": "https://example.com/ethical.jpg",
        "desc": "ğŸ”¥ Full Ethical Hacking from scratch to pro\nğŸ§  Language: Hindi + Tools\nğŸ’» Practical Videos\nğŸ“ Files Included",
        "buy": "https://livegram.me/yourpaymentlink1"
    },
    "carding": {
        "title": "Carding Master Course",
        "price": "â‚¹999 â†’ â‚¹699",
        "image": "https://example.com/carding.jpg",
        "desc": "ğŸ’³ Learn Carding like a pro\nğŸ“± Includes Android & iOS tools\nâš ï¸ Safety Tips & VPN\nğŸ’¼ Working Methods",
        "buy": "https://livegram.me/yourpaymentlink2"
    },
    "darkweb": {
        "title": "Dark Web Full Course",
        "price": "â‚¹999 â†’ â‚¹699",
        "image": "https://example.com/darkweb.jpg",
        "desc": "ğŸŒ‘ Full Guide to Dark Web\nğŸŒ Legal and Illegal aspects\nğŸ“ Hidden Tools, Markets\nğŸ¯ Safety and Browsers",
        "buy": "https://livegram.me/yourpaymentlink3"
    },
    "combo": {
        "title": "ğŸ All 3 Courses Bundle",
        "price": "â‚¹2999 â†’ â‚¹1444",
        "image": "https://example.com/combo.jpg",
        "desc": "ğŸ¯ Ethical Hacking + Carding + Dark Web\nğŸ”¥ One-time offer\nğŸ“ All files included\nğŸ“¹ Lifetime Access",
        "buy": "https://livegram.me/yourpaymentlink4"
    }
}


# === Start Command ===
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [InlineKeyboardButton("âœ… Join Main Channel", url=f"https://t.me/{JOIN_CHANNEL[1:]}")],
        [InlineKeyboardButton("ğŸ‚ Birthday Special Offers", callback_data="show_courses")]
    ]
    await update.message.reply_text(
        "ğŸ‘‹ Welcome! Please join our official channel and then explore Birthday Special Offers ğŸ",
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

# === Show Course Buttons ===
async def show_courses(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    keyboard = [
        [
            InlineKeyboardButton("ğŸ’» Ethical Hacking â‚¹699", callback_data="ethical"),
            InlineKeyboardButton("ğŸ’³ Carding Course â‚¹699", callback_data="carding")
        ],
        [
            InlineKeyboardButton("ğŸŒ Dark Web Course â‚¹699", callback_data="darkweb"),
            InlineKeyboardButton("ğŸ All 3 for â‚¹1444", callback_data="combo")
        ]
    ]
    await query.edit_message_text("ğŸ‚ Choose your Birthday Offer:", reply_markup=InlineKeyboardMarkup(keyboard))

# === Show Course Details + Buy Button ===
async def course_detail(update: Update, context: ContextTypes.DEFAULT_TYPE):
    query = update.callback_query
    await query.answer()
    key = query.data
    course = courses[key]
    keyboard = [
        [
            InlineKeyboardButton("âœ… Buy Now", url=course["buy"]),
            InlineKeyboardButton("ğŸ”™ Back", callback_data="show_courses")
        ]
    ]
    await query.edit_message_media(
        media=InputMediaPhoto(media=course["image"], caption=f"ğŸ“ {course['title']}\nğŸ’° {course['price']}\n\n{course['desc']}"),
        reply_markup=InlineKeyboardMarkup(keyboard)
    )

# === Feedback Handler (Optional) ===
async def feedback(update: Update, context: ContextTypes.DEFAULT_TYPE):
    text = update.message.text
    await context.bot.send_message(chat_id=ADMIN_ID, text=f"ğŸ“© Feedback received:\n{text}")
    await update.message.reply_text("âœ… Thank you for your feedback!")

# === Main ===
app = ApplicationBuilder().token(BOT_TOKEN).build()

app.add_handler(CommandHandler("start", start))
app.add_handler(CallbackQueryHandler(show_courses, pattern="^show_courses$"))
app.add_handler(CallbackQueryHandler(course_detail, pattern="^(ethical|carding|darkweb|combo)$"))
app.add_handler(CommandHandler("feedback", feedback))

app.run_polling()
